{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\PC\\\\Desktop\\\\Tugas_Assigment4_Amin\\\\frontend\\\\src\\\\Pages\\\\Admin\\\\AdminPage.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useContext } from 'react';\nimport Axios from 'axios';\nimport { myContext } from '../Context/Context';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Admin() {\n  _s();\n\n  const ctx = useContext(myContext);\n  const [data, setData] = useState();\n  const [selectedUser, setSelectedUser] = useState();\n  useEffect(() => {\n    Axios.get(\"http://localhost:8000/getallusers\", {\n      withCredentials: true\n    }).then(res => {\n      setData(res.data.filter(item => {\n        return item.username !== ctx.username;\n      }));\n    });\n  }, [ctx]);\n\n  if (!data) {\n    return null;\n  }\n\n  const deleteUser = () => {\n    let userid;\n    data.forEach(item => {\n      if (item.username === selectedUser) {\n        userid = item.id;\n      }\n    });\n    Axios.post(\"http://localhost:8000/deleteuser\", {\n      id: userid\n    }, {\n      withCredentials: true\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Admin Page, Only Admin's Can See This!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        onChange: e => setSelectedUser(e.target.value),\n        name: \"deleteuser\",\n        id: \"deleteuser\",\n        \"aria-label\": \"nice\",\n        children: [/*#__PURE__*/_jsxDEV(\"option\", {\n          id: \"Select a user\",\n          children: \"Select A User\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 7\n        }, this), data.map(item => {\n          return /*#__PURE__*/_jsxDEV(\"option\", {\n            id: item.username,\n            children: item.username\n          }, item.username, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: deleteUser,\n        children: \"Delete User\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 5\n    }, this)\n  }, void 0, false);\n}\n\n_s(Admin, \"r3zTb6dQo2GIuJ8oH9lSF9+69Pk=\");\n\n_c = Admin;\n\nvar _c;\n\n$RefreshReg$(_c, \"Admin\");","map":{"version":3,"names":["React","useEffect","useState","useContext","Axios","myContext","Admin","ctx","data","setData","selectedUser","setSelectedUser","get","withCredentials","then","res","filter","item","username","deleteUser","userid","forEach","id","post","e","target","value","map"],"sources":["C:/Users/PC/Desktop/Tugas_Assigment4_Amin/frontend/src/Pages/Admin/AdminPage.tsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from 'react'\r\nimport Axios, { AxiosResponse } from 'axios'\r\nimport { myContext } from '../Context/Context';\r\nimport { UserInterface } from '../../Inteface/interface';\r\n\r\nexport default function Admin() {\r\n  const ctx = useContext(myContext);\r\n  \r\n  const [data, setData] = useState<UserInterface[]>();\r\n  const [selectedUser, setSelectedUser] = useState<string>();\r\n  useEffect(() => {\r\n    Axios.get(\"http://localhost:8000/getallusers\", {\r\n      withCredentials: true\r\n    }).then((res : AxiosResponse) => {\r\n      setData(res.data.filter((item : UserInterface) => {\r\n        return item.username !== ctx.username\r\n      }))\r\n    })\r\n  }, [ctx]);\r\n  if (!data) {\r\n    return null;\r\n  }\r\n  \r\n\r\n  const deleteUser = () => {\r\n    let userid : string;\r\n    data.forEach((item: UserInterface) => {\r\n      \r\n      if (item.username === selectedUser) {\r\n        userid = item.id;\r\n      }\r\n    })\r\n    \r\n    Axios.post(\"http://localhost:8000/deleteuser\", {\r\n      id: userid!\r\n    }, {\r\n      withCredentials: true\r\n    });\r\n  }\r\n\r\n  return (\r\n    <>\r\n    <div>\r\n      <h1>Admin Page, Only Admin's Can See This!</h1>\r\n      <select onChange={e => setSelectedUser(e.target.value)} name=\"deleteuser\" id=\"deleteuser\" aria-label='nice'>\r\n      <option id=\"Select a user\">Select A User</option>\r\n        {\r\n          data.map((item : UserInterface) => {\r\n            return (\r\n              <option key={item.username} id={item.username}>{item.username}</option>\r\n            )\r\n          })\r\n        }\r\n      </select>\r\n      <button onClick={deleteUser}>Delete User</button>\r\n      </div>\r\n    </>\r\n  )\r\n}"],"mappings":";;;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,EAAqCC,UAArC,QAAuD,OAAvD;AACA,OAAOC,KAAP,MAAqC,OAArC;AACA,SAASC,SAAT,QAA0B,oBAA1B;;;AAGA,eAAe,SAASC,KAAT,GAAiB;EAAA;;EAC9B,MAAMC,GAAG,GAAGJ,UAAU,CAACE,SAAD,CAAtB;EAEA,MAAM,CAACG,IAAD,EAAOC,OAAP,IAAkBP,QAAQ,EAAhC;EACA,MAAM,CAACQ,YAAD,EAAeC,eAAf,IAAkCT,QAAQ,EAAhD;EACAD,SAAS,CAAC,MAAM;IACdG,KAAK,CAACQ,GAAN,CAAU,mCAAV,EAA+C;MAC7CC,eAAe,EAAE;IAD4B,CAA/C,EAEGC,IAFH,CAESC,GAAD,IAAyB;MAC/BN,OAAO,CAACM,GAAG,CAACP,IAAJ,CAASQ,MAAT,CAAiBC,IAAD,IAA0B;QAChD,OAAOA,IAAI,CAACC,QAAL,KAAkBX,GAAG,CAACW,QAA7B;MACD,CAFO,CAAD,CAAP;IAGD,CAND;EAOD,CARQ,EAQN,CAACX,GAAD,CARM,CAAT;;EASA,IAAI,CAACC,IAAL,EAAW;IACT,OAAO,IAAP;EACD;;EAGD,MAAMW,UAAU,GAAG,MAAM;IACvB,IAAIC,MAAJ;IACAZ,IAAI,CAACa,OAAL,CAAcJ,IAAD,IAAyB;MAEpC,IAAIA,IAAI,CAACC,QAAL,KAAkBR,YAAtB,EAAoC;QAClCU,MAAM,GAAGH,IAAI,CAACK,EAAd;MACD;IACF,CALD;IAOAlB,KAAK,CAACmB,IAAN,CAAW,kCAAX,EAA+C;MAC7CD,EAAE,EAAEF;IADyC,CAA/C,EAEG;MACDP,eAAe,EAAE;IADhB,CAFH;EAKD,CAdD;;EAgBA,oBACE;IAAA,uBACA;MAAA,wBACE;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAEE;QAAQ,QAAQ,EAAEW,CAAC,IAAIb,eAAe,CAACa,CAAC,CAACC,MAAF,CAASC,KAAV,CAAtC;QAAwD,IAAI,EAAC,YAA7D;QAA0E,EAAE,EAAC,YAA7E;QAA0F,cAAW,MAArG;QAAA,wBACA;UAAQ,EAAE,EAAC,eAAX;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QADA,EAGIlB,IAAI,CAACmB,GAAL,CAAUV,IAAD,IAA0B;UACjC,oBACE;YAA4B,EAAE,EAAEA,IAAI,CAACC,QAArC;YAAA,UAAgDD,IAAI,CAACC;UAArD,GAAaD,IAAI,CAACC,QAAlB;YAAA;YAAA;YAAA;UAAA,QADF;QAGD,CAJD,CAHJ;MAAA;QAAA;QAAA;QAAA;MAAA,QAFF,eAYE;QAAQ,OAAO,EAAEC,UAAjB;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAZF;IAAA;MAAA;MAAA;MAAA;IAAA;EADA,iBADF;AAkBD;;GArDuBb,K;;KAAAA,K"},"metadata":{},"sourceType":"module"}